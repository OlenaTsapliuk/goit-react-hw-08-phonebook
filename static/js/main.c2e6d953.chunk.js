(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return g}));var r=n(18),c=n.n(r),a=n(25),o=n(20),i=n.n(o),u=n(3),s=n(21);n(114);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var l,d=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){i.a.defaults.headers.common.Authorization=""},j=Object(u.c)("authUser/register",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/signup",t).then((function(e){return e.data}));case 4:return a=e.sent,d(a.token),s.b.success("Hello, ".concat(a.user.name,"!")),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),s.b.error("Registration failed. Check the correctness of the entered data.",{style:{border:"1px solid #2b0330",padding:"16px",color:"#f2f4f3"},iconTheme:{primary:"rgb(194, 98, 223);",secondary:"#f2f4f3"}}),e.abrupt("return",r(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(u.c)("authUser/logIn",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/login",t).then((function(e){return e.data}));case 4:return a=e.sent,d(a.token),s.b.success("Hello, ".concat(a.user.name,"!")),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),s.b.error("Login failed. Check the correctness of the entered data. Or register.",{style:{border:"1px solid #713200",padding:"16px",color:"#f2f4f3"},iconTheme:{primary:"#713200",secondary:"#f2f4f3"}}),e.abrupt("return",r(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),h={register:j,logOut:Object(u.c)("authUser/logOut",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/logout",t).then((function(e){return e.data}));case 4:return a=e.sent,b(),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:f,fetchCurrentUser:Object(u.c)("authUser/fetchCurrentUser",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,o=a(),u=o.authUser.token){e.next=5;break}return e.abrupt("return",r());case 5:return d(u),e.prev=6,e.next=9,i.a.get("/users/current").then((function(e){return e.data}));case 9:return s=e.sent,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",r(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}())},O={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser}},p=n(4),g=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(l={},Object(p.a)(l,h.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(p.a)(l,h.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(p.a)(l,h.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(p.a)(l,h.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),l)}).reducer},118:function(e,t,n){"use strict";n.r(t);n(65);var r=n(0),c=n.n(r),a=n(29),o=n.n(a),i=n(17),u=n(52),s=(n(70),n(6)),l=n(10),d=n(21),b=n(53),j=n.n(b),f=n(1);var h=function(e){var t=e.children;return Object(f.jsx)("div",{className:j.a.container,children:t})},O=n(42),p=n(9),g=n(23),v=n(11),x=["children","redirectTo"];function m(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(g.a)(e,x),a=Object(l.c)(v.c.getIsLoggedIn);return Object(f.jsx)(s.b,Object(p.a)(Object(p.a)({},c),{},{children:a?t:Object(f.jsx)(s.a,{to:r})}))}var _=["children","restricted","redirectTo"];function k(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,o=Object(g.a)(e,_),i=Object(l.c)(v.c.getIsLoggedIn)&&r;return Object(f.jsx)(s.b,Object(p.a)(Object(p.a)({},o),{},{children:i?Object(f.jsx)(s.a,{to:a}):t}))}var y=n(27),C=n.n(y),N=function(){var e=Object(l.c)(v.c.getIsLoggedIn);return Object(f.jsxs)("nav",{children:[Object(f.jsx)(i.c,{exact:!0,to:"/",className:C.a.link,activeClassName:C.a.activeLink,children:"Main"}),e?Object(f.jsx)(i.c,{to:"/contacts",exact:!0,className:C.a.link,activeClassName:C.a.activeLink,children:"Phonebook"}):null]})},L=n.p+"static/media/user.a6143582.png",I=n(120),w=n(34),U=n.n(w);function T(){var e=Object(l.b)(),t=Object(l.c)(v.c.getUsername),n=L;return Object(f.jsxs)("div",{className:U.a.container,children:[Object(f.jsx)("img",{src:n,alt:"",width:"32",className:U.a.avatar}),Object(f.jsxs)("span",{className:U.a.name,children:["Welcome, ",t]}),Object(f.jsx)(I.a,{type:"button",onClick:function(){return e(v.a.logOut())},children:"LogOut"})]})}var z=n(22),A=n.n(z);function R(){return Object(f.jsx)("nav",{className:A.a.header,children:Object(f.jsxs)("div",{className:A.a.auth,children:[Object(f.jsx)(i.c,{to:"/register",className:A.a.link,activeClassName:A.a.activeLink,children:"Register"}),Object(f.jsx)(i.c,{to:"/login",className:A.a.link,activeClassName:A.a.activeLink,children:"Login"})]})})}var M=n(59),P=n.n(M);function S(){var e=Object(l.c)(v.c.getIsLoggedIn);return Object(f.jsxs)("header",{className:P.a.header,children:[Object(f.jsx)(N,{}),e?Object(f.jsx)(T,{}):Object(f.jsx)(R,{})]})}var V=n(60),W=n.n(V);function q(e){var t=e.children;return Object(f.jsx)("div",{className:W.a.card,children:t})}var E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,137))})),J=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,138))})),B=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,141))})),F=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,140))}));var H,Q,Y,D=function(){var e=Object(l.b)();return Object(r.useEffect)((function(){e(v.a.fetchCurrentUser())}),[e]),Object(f.jsxs)(h,{children:[Object(f.jsx)(S,{}),Object(f.jsxs)(q,{children:[Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)(O.a,{}),children:Object(f.jsxs)(s.d,{children:[Object(f.jsx)(k,{exact:!0,path:"/",component:B}),Object(f.jsx)(k,{path:"/register",redirectTo:"/login",restricted:!0,component:E}),Object(f.jsx)(k,{path:"/login",redirectTo:"/contacts",restricted:!0,component:J}),Object(f.jsx)(m,{path:"/contacts",redirectTo:"/login",component:F})]})}),Object(f.jsx)(d.a,{position:"top-center",toastOptions:{style:{background:"#2b0330",color:"#fff"}}})]})]})},G=n(33),K=n(3),Z=n(19),X=n(61),$=n.n(X),ee=n(62),te=n.n(ee),ne=n(4),re=n(8),ce=n(7),ae=Object(K.d)([],(H={},Object(ne.a)(H,ce.j,(function(e,t){return t.payload})),Object(ne.a)(H,ce.c,(function(e,t){var n=t.payload;return[].concat(Object(G.a)(e),[n])})),Object(ne.a)(H,ce.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),H)),oe=Object(K.d)("",Object(ne.a)({},ce.d,(function(e,t){return t.payload}))),ie=Object(K.d)(!1,(Q={},Object(ne.a)(Q,ce.i,(function(){return!0})),Object(ne.a)(Q,ce.j,(function(){return!1})),Object(ne.a)(Q,ce.h,(function(){return!1})),Object(ne.a)(Q,ce.b,(function(){return!0})),Object(ne.a)(Q,ce.c,(function(){return!1})),Object(ne.a)(Q,ce.a,(function(){return!1})),Object(ne.a)(Q,ce.f,(function(){return!0})),Object(ne.a)(Q,ce.g,(function(){return!1})),Object(ne.a)(Q,ce.e,(function(){return!1})),Q)),ue=Object(K.d)(null,(Y={},Object(ne.a)(Y,ce.h,(function(e,t){return t.payload})),Object(ne.a)(Y,ce.a,(function(e,t){return t.payload})),Object(ne.a)(Y,ce.e,(function(e,t){return t.payload})),Y)),se=Object(re.b)({items:ae,filter:oe,loading:ie,error:ue}),le=[].concat(Object(G.a)(Object(K.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[$.a]),de={key:"auth",storage:te.a,whitelist:["token"]},be=Object(K.a)({reducer:{auth:Object(Z.g)(de,v.b),contacts:se},middleware:le,devTools:!1}),je=Object(Z.h)(be);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(l.a,{store:be,children:Object(f.jsx)(u.a,{loading:null,persistor:je,children:Object(f.jsx)(i.a,{children:Object(f.jsx)(D,{})})})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={link:"AuthNav_link__ubPMq",activeLink:"AuthNav_activeLink__2RvjD AuthNav_link__ubPMq",header:"AuthNav_header__3Jvy2",auth:"AuthNav_auth__3avP8"}},27:function(e,t,n){e.exports={link:"Navigation_link__1z2iC",activeLink:"Navigation_activeLink__3VNhc Navigation_link__1z2iC",header:"Navigation_header__1hKG0",auth:"Navigation_auth__9ICnY"}},34:function(e,t,n){e.exports={container:"UserMenu_container__2QaW4",avatar:"UserMenu_avatar__2TVqL",name:"UserMenu_name__QkdYj"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(54),c=n(55),a=n(64),o=n(63),i=n(56),u=n.n(i),s=n(0),l=(n(93),n(57)),d=n.n(l),b=n(1),j=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:d.a.spinner,children:Object(b.jsx)(u.a,{type:"Circles",color:"#15226d",height:100,width:100})})}}]),n}(s.Component)},53:function(e,t,n){e.exports={container:"Container_container__2PZwU"}},57:function(e,t,n){e.exports={spinner:"Loader_spinner__3Jcd4"}},59:function(e,t,n){e.exports={header:"AppBar_header__3Vi5I"}},60:function(e,t,n){e.exports={card:"Wrapper_card__w8T0-"}},7:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return j}));var r=n(3),c=Object(r.b)("contacts/fetchContactRequest"),a=Object(r.b)("contacts/fetchContactSuccess"),o=Object(r.b)("contacts/fetchContactError"),i=Object(r.b)("contacts/addContactRequest"),u=Object(r.b)("contacts/addContactSuccess"),s=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactRequest"),d=Object(r.b)("contacts/deleteContactSuccess"),b=Object(r.b)("contacts/deleteContactError"),j=Object(r.b)("contacts/changeFilter")},70:function(e,t,n){}},[[118,6,7]]]);
//# sourceMappingURL=main.c2e6d953.chunk.js.map